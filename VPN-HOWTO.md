# VPN-HOWTO

Phoebus defaults to using EPICS PV-access. Currently, we're unable to access this over a VPN.
The solution is to switch to using EPICS Channel Access (CA) and additionally to pass name-hint information
as environment variables to Phoebus on Launch

## Create a set of ip-addresses to search, store in ./ioc_addr.conf

Assuming a hosts(5) file of ip-address->DNS name mappings, save as follows

cat HOSTS-SUBSET | ./hosts2ioc_addr

### example: we have our hosts in the paste buffer already (eg from multimon):
```
(base) pgm@hoy6:~/PROJECTS/ACQ400CSSP$ ./hosts2ioc_addr
# PASTE
#hosts file generated by multimon on 2025-06-01 11:18:55.963789
10.12.197.125 acq1001_070
10.12.197.21 acq2206_068
10.12.197.52 acq2106_280
10.12.197.11 acq2206_067
10.12.197.36 acq1001_084
10.12.197.65 acq2106_133
10.12.197.90 acq2106_007
10.12.197.27 acq2106_123
# ^D
(base) pgm@hoy6:~/PROJECTS/ACQ400CSSP$
(base) pgm@hoy6:~/PROJECTS/ACQ400CSSP$ cat ioc_addr.conf
#hosts 10.12.197.125 10.12.197.21 10.12.197.52 10.12.197.11 10.12.197.36 10.12.197.65 10.12.197.90 10.12.197.27
```

## Set default ca. NB: must APPEND

echo "org.phoebus.pv/default=ca" >> src/settings_base.ini

## Create workspace in the normal way - ioc_addr.conf forces use of environment variables to enable remote CA

./run_phoebus.sh UUT


## Bonus run a multiple workspace remotely

example - creates WS multi_acq1102_043_acq1102_044_acq1102_045_acq1102_046
```
./ACQ400CSSP_launcher.py acq1102_043 acq1102_044 acq1102_045 acq1102_046
# close Phoebus and run
./run_phoebus.sh multi_acq1102_043_acq1102_044_acq1102_045_acq1102_046
```


